-- Load real pet spawner
local Spawner = loadstring(game:HttpGet("https://codeberg.org/GrowAFilipino/GrowAGarden/raw/branch/main/Spawner.lua"))()

local allPets = {
	"Kitsune", "Raccoon", "Butterfly", "Disco Bee", "Corrupted Kitsune", "Dragonfly", "T-Rex"
}

local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "LuluHubUI"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.Parent = player:WaitForChild("PlayerGui")

-- Loading screen
local loadingFrame = Instance.new("Frame", gui)
loadingFrame.Size = UDim2.new(1, 0, 1, 0)
loadingFrame.BackgroundColor3 = Color3.new(0, 0, 0)
loadingFrame.ZIndex = 10

local message = Instance.new("TextLabel", loadingFrame)
message.Size = UDim2.new(0.8, 0, 0.1, 0)
message.Position = UDim2.new(0.1, 0, 0.45, 0)
message.Text = "üå∏ Lulu Hub is preparing... Please wait 20 seconds"
message.TextColor3 = Color3.new(1, 1, 1)
message.BackgroundTransparency = 1
message.TextScaled = true
message.Font = Enum.Font.GothamBold
message.TextStrokeTransparency = 0.4
message.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)

local glow = Instance.new("UIStroke", message)
glow.Thickness = 2
glow.Color = Color3.fromRGB(255, 255, 255)
glow.Transparency = 0.5

-- Toggle Button
local toggleBtn = Instance.new("TextButton", gui)
toggleBtn.Size = UDim2.new(0, 120, 0, 40)
toggleBtn.Position = UDim2.new(0, 10, 0, 10)
toggleBtn.Text = "üå∏ Lulu Hub"
toggleBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextScaled = true
toggleBtn.Visible = false
toggleBtn.AutoButtonColor = true

-- Main Frame
local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0.6, 0, 0.6, 0)
mainFrame.Position = UDim2.new(0.2, 0, 0.2, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
mainFrame.Visible = false
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.BorderSizePixel = 0

-- Header Bar
local header = Instance.new("Frame", mainFrame)
header.Size = UDim2.new(1, 0, 0, 40)
header.BackgroundColor3 = Color3.fromRGB(50, 50, 80)

local hubLabel = Instance.new("TextLabel", header)
hubLabel.Size = UDim2.new(1, -40, 1, 0)
hubLabel.Position = UDim2.new(0, 10, 0, 0)
hubLabel.Text = "üå∏ Lulu Hub"
hubLabel.TextColor3 = Color3.new(1, 1, 1)
hubLabel.BackgroundTransparency = 1
hubLabel.Font = Enum.Font.GothamBold
hubLabel.TextScaled = true

local closeBtn = Instance.new("TextButton", header)
closeBtn.Size = UDim2.new(0, 40, 0, 40)
closeBtn.Position = UDim2.new(1, -40, 0, 0)
closeBtn.Text = "‚ùå"
closeBtn.TextScaled = true
closeBtn.BackgroundColor3 = Color3.fromRGB(80, 40, 40)
closeBtn.TextColor3 = Color3.new(1, 1, 1)
closeBtn.Font = Enum.Font.GothamBold

closeBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
end)

-- Sidebar
local sidebar = Instance.new("Frame", mainFrame)
sidebar.Size = UDim2.new(0.3, 0, 1, -40)
sidebar.Position = UDim2.new(0, 0, 0, 40)
sidebar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)

local sidebarLabel = Instance.new("TextLabel", sidebar)
sidebarLabel.Size = UDim2.new(1, 0, 0, 30)
sidebarLabel.Text = "Players"
sidebarLabel.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
sidebarLabel.TextColor3 = Color3.new(1, 1, 1)
sidebarLabel.Font = Enum.Font.GothamBold
sidebarLabel.TextScaled = true

local playerScroll = Instance.new("ScrollingFrame", sidebar)
playerScroll.Size = UDim2.new(1, 0, 1, -30)
playerScroll.Position = UDim2.new(0, 0, 0, 30)
playerScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
playerScroll.ScrollBarThickness = 6
playerScroll.BackgroundColor3 = Color3.fromRGB(40, 40, 40)

-- Pet Panel
local petPanel = Instance.new("Frame", mainFrame)
petPanel.Size = UDim2.new(0.7, 0, 1, -40)
petPanel.Position = UDim2.new(0.3, 0, 0, 40)
petPanel.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

local petScroll = Instance.new("ScrollingFrame", petPanel)
petScroll.Size = UDim2.new(1, 0, 1, 0)
petScroll.Position = UDim2.new(0, 0, 0, 0)
petScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
petScroll.ScrollBarThickness = 6
petScroll.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

-- Logic
local selectedBtn
local selectedPlayer = nil
local perPlayerPets = {}

local function generatePetSet()
	local count = math.random(2, 4)
	local selected = {}
	local used = {}
	while #selected < count do
		local pet = allPets[math.random(1, #allPets)]
		if not used[pet] then
			used[pet] = true
			table.insert(selected, {name = pet, max = math.random(1,2), used = 0})
		end
	end
	return selected
end

local function loadPlayers()
	playerScroll:ClearAllChildren()
	local y = 0
	for _, plr in pairs(game.Players:GetPlayers()) do
		local btn = Instance.new("TextButton", playerScroll)
		btn.Size = UDim2.new(1, -8, 0, 30)
		btn.Position = UDim2.new(0, 4, 0, y)
		btn.Text = plr.Name
		btn.TextColor3 = Color3.new(1, 1, 1)
		btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		btn.Font = Enum.Font.Gotham
		btn.TextScaled = true

		if not perPlayerPets[plr.Name] then
			perPlayerPets[plr.Name] = generatePetSet()
		end

		btn.MouseButton1Click:Connect(function()
			selectedPlayer = plr.Name
			if selectedBtn then
				selectedBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
			end
			btn.BackgroundColor3 = Color3.fromRGB(100, 80, 130)
			selectedBtn = btn
			loadPetList(perPlayerPets[plr.Name])
		end)

		y += 32
	end
	playerScroll.CanvasSize = UDim2.new(0, 0, 0, y)
end

function loadPetList(petList)
	petScroll:ClearAllChildren()
	local y = 0
	for _, petData in ipairs(petList) do
		local btn = Instance.new("TextButton", petScroll)
		btn.Size = UDim2.new(1, -8, 0, 30)
		btn.Position = UDim2.new(0, 4, 0, y)
		btn.Text = petData.name .. " (" .. (petData.max - petData.used) .. ")"
		btn.TextColor3 = Color3.new(1, 1, 1)
		btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
		btn.Font = Enum.Font.Gotham
		btn.TextScaled = true

		btn.MouseButton1Click:Connect(function()
			if petData.used < petData.max then
				petData.used += 1
				Spawner.SpawnPet(petData.name, 2, 1)
				btn.Text = petData.name .. " (" .. (petData.max - petData.used) .. ")"
				if petData.used >= petData.max then
					btn.AutoButtonColor = false
					btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
				end
			end
		end)

		y += 32
	end
	petScroll.CanvasSize = UDim2.new(0, 0, 0, y)
end

toggleBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = not mainFrame.Visible
	if mainFrame.Visible then
		perPlayerPets = {}
		loadPlayers()
		petScroll:ClearAllChildren()
	end
end)

task.delay(20, function()
	loadingFrame:Destroy()
	mainFrame.Visible = true
	toggleBtn.Visible = true
	loadPlayers()
end)
